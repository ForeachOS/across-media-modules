<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.foreach.imageserver.core.data.ImageResolutionDao">

    <sql id="columns">
		IR.id as ir_id,
        IR.width as ir_width,
        IR.height as ir_height
	</sql>

    <resultMap id="imageResolutionMap" type="ImageResolution">
        <id property="id" column="ir_id"/>
        <result property="width" column="ir_width"/>
        <result property="height" column="ir_height"/>
    </resultMap>

    <select id="getForContext" parameterType="map" resultMap="imageResolutionMap">
        SELECT
        <include refid="columns"/>
        FROM CONTEXT_IMAGE_RESOLUTION CIR
        LEFT JOIN IMAGE_RESOLUTION IR ON IR.id = CIR.imageResolutionId
        WHERE CIR.contextId = #{contextId}
    </select>

</mapper>
