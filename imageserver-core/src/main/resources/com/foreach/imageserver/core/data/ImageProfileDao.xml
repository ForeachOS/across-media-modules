<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.foreach.imageserver.core.data.ImageProfileDao">

    <resultMap id="imageProfileModificationMap" type="ImageProfileModification">
        <id property="id" column="id"/>
        <result property="imageResolutionId" column="resolutionId"/>
        <result property="imageProfileId" column="profileId"/>
        <result property="imageContextId" column="contextId"/>
        <result property="modificationDto.resolution.width" column="width"/>
        <result property="modificationDto.resolution.height" column="height"/>
        <result property="modificationDto.density.width" column="densityX"/>
        <result property="modificationDto.density.height" column="densityY" />
        <result property="modificationDto.boundaries.width" column="boundariesWidth" />
        <result property="modificationDto.boundaries.height" column="boundariesHeight" />
        <result property="modificationDto.crop.x" column="cropX" />
        <result property="modificationDto.crop.y" column="cropY" />
        <result property="modificationDto.crop.width" column="cropWidth" />
        <result property="modificationDto.crop.height" column="cropHeight" />
        <result property="modificationDto.crop.source.width" column="cropSourceWidth" />
        <result property="modificationDto.crop.source.height" column="cropSourceHeight" />
        <result property="modificationDto.crop.box.width" column="cropBoxWidth" />
        <result property="modificationDto.crop.box.height" column="cropBoxHeight" />
    </resultMap>

    <select id="getModification" parameterType="map" resultMap="imageProfileModificationMap">
        SELECT *
        FROM IMAGE_PROFILE_MODIFICATION IPM
        WHERE resolutionId = #{resolutionId} AND contextId = #{contextId} AND profileId = #{profileId}
    </select>

</mapper>