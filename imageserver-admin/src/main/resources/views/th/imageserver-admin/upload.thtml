<!doctype html>
<html lang="en" ng-app="uploadApp">
<head>
    <title>My HTML File</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.8/angular.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.8/angular-route.js"></script>
    <script src="http://flowjs.github.io/ng-flow/bower_components/flow.js/dist/flow.js"></script>
    <script src="http://flowjs.github.io/ng-flow/bower_components/ng-flow/dist/ng-flow.js"></script>
</head>
<body ng-controller="UploadController">

<div>
    <form method="post" action="/load" enctype="multipart/form-data">
        <input type="hidden" name="token" value="azerty"/>
        <input type="text" name="iid"></input>

        <input type="file" name="imageData" flow-btn=""/>

        <div ng-repeat="file in $flow.files">
            {{file.name}}
        </div>

        <input type="submit"/>
    </form>
</div>

<script type="text/javascript" th:inline="javascript">
    /*<![CDATA[*/
    var app = angular.module('uploadApp', ['flow']);

    app.config(['flowFactoryProvider', function (flowFactoryProvider) {
      flowFactoryProvider.defaults = {
        target: '/load',
        permanentErrors: [404, 500, 501],
        maxChunkRetries: 1,
        chunkRetryInterval: 5000,
        simultaneousUploads: 1,
        singleFile: true
      };
      flowFactoryProvider.on('catchAll', function (event) {
        console.log('catchAll', arguments);
      });
      // Can be used with different implementations of Flow.js
      // flowFactoryProvider.factory = fustyFlowFactory;
    }]);

    app.controller('UploadController', function ($scope, $http) {
        /*
         $scope.context = 'ONLINE';

         $scope.change = function () {
         $http.get('/modification/listResolutions?token=azerty&context=' + $scope.context).success(function (data) {
         $scope.resolutions = data.result;
         });
         };

         $scope.change();
         */

    });
    /*]]>*/
</script>
</body>
</html>