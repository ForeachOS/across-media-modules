<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.foreach.imageserver.dao.UserGroupDao">

	<sql id="userGroupColumns">
        UG.groupid as usergroup_groupid,
        U.userkey as usergroup_userkey
    </sql>

	<resultMap id="userGroupMap" type="UserGroup">
		<result property="groupId" column="usergroup_groupid"/>
        <result property="userKey" column="usergroup_userkey"/>
	</resultMap>

	<select id="getUserGroup" parameterType="UserGroup" resultMap="userGroupMap">
		SELECT
		<include refid="userGroupColumns"/>

		FROM AuthUser_Group UG
        INNER JOIN ImageGroup G ON UG.groupid = G.id
        INNER JOIN AuthUser U ON UG.userid = U.id
		WHERE UG.groupid = #{groupId} AND U.userkey = #{userKey}
	</select>

</mapper>